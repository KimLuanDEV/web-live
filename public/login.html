<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <title>ﾄ斉ハg nh蘯ｭp</title>
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
<div class="container">
  <div class="card" style="max-width:420px;margin:auto">
    <h1>沐 ﾄ斉ハg nh蘯ｭp</h1>

    <input id="email" placeholder="Email" />
    <input id="password" type="password" placeholder="M蘯ｭt kh蘯ｩu" />

    <button id="loginBtn">ﾄ斉ハg nh蘯ｭp</button>

    <p style="margin-top:10px">
      Chﾆｰa cﾃｳ tﾃi kho蘯｣n?
      <a href="/register.html">ﾄ斉ハg kﾃｽ</a>
    </p>
  </div>
</div>

<script type="module">
import { saveAuth } from "./auth.js";

document.getElementById("loginBtn").onclick = async () => {
  const email = email.value;
  const password = password.value;

  const res = await fetch("/api/login", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ email, password })
  });

  const data = await res.json();
  if (!res.ok) return alert(data.error);

  saveAuth(data);
  location.href = "/lobby.html";
};
</script>
</body>
</html>
